{"uid":"46b9dafcac20adc8","name":"test_modify_wiki_page_success_with_existing_wiki_and_page","fullName":"src.tests.ado.wiki.test_unit_ado_wiki.TestWikiApiWrapperPositive#test_modify_wiki_page_success_with_existing_wiki_and_page","historyId":"0e92be88138aef2d7762c7adcdba70c9","time":{"start":1743497890393,"stop":1743497890397,"duration":4},"description":"Test successful modification of wiki page when wiki and page exist.","descriptionHtml":"<p>Test successful modification of wiki page when wiki and page exist.</p>\n","status":"failed","statusMessage":"AssertionError: assert ToolException(\"Unable to modify wiki page: WikiPageCreateOrUpdateParameters.__init__() got an unexpected keyword argument 'name'\") == 'Page modified successfully'","statusTrace":"self = <src.tests.ado.wiki.test_unit_ado_wiki.TestWikiApiWrapperPositive object at 0x7f3344e15f10>\nwiki_wrapper = AzureDevOpsApiWrapper(organization_url='https://dev.azure.com/test-repo', project='project', token='token_value')\ndefault_values = {'organization_url': 'https://dev.azure.com/test-repo', 'project': 'project', 'token': 'token_value'}\n\n    def test_modify_wiki_page_success_with_existing_wiki_and_page(self, wiki_wrapper, default_values):\n        \"\"\"Test successful modification of wiki page when wiki and page exist.\"\"\"\n        with patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.create_wiki\") as mock_create_wiki, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.get_all_wikis\") as mock_get_all_wikis, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.get_page\") as mock_get_page, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.create_or_update_page\") as mock_create_or_update_page, \\\n            patch(\"azure.devops.v7_0.core.core_client.CoreClient.get_projects\") as mock_get_projects:\n    \n            mock_create_wiki.return_value = MagicMock()\n            mock_get_all_wikis.return_value = [MagicMock(name=\"test-wiki-id\")]\n            mock_page = MagicMock()\n            mock_page.eTag = \"test-version\"\n            mock_get_page.return_value = mock_page\n            mock_create_or_update_page.return_value = \"Page modified successfully\"\n    \n            mock_project = MagicMock()\n            mock_project.name = default_values[\"project\"]\n            mock_project.id = \"project-id\"\n            mock_get_projects.return_value = [mock_project]\n    \n            wiki_wrapper._client.get_all_wikis = mock_get_all_wikis\n            wiki_wrapper._client.get_page = mock_get_page\n            wiki_wrapper._client.create_or_update_page = mock_create_or_update_page\n            wiki_wrapper._core_client.get_projects = mock_get_projects\n    \n            result = wiki_wrapper.modify_wiki_page(\n                wiki_identified=\"test-wiki-id\",\n                page_name=\"/test-page\",\n                page_content=\"Updated content\",\n                version_identifier=\"branch_name\",\n                version_type=\"branch\"\n            )\n    \n>           assert result == \"Page modified successfully\"\nE           assert ToolException(\"Unable to modify wiki page: WikiPageCreateOrUpdateParameters.__init__() got an unexpected keyword argument 'name'\") == 'Page modified successfully'\n\nsrc/tests/ado/wiki/test_unit_ado_wiki.py:259: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_suite_cleanup","time":{"start":1743497886912,"stop":1743497886916,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wiki_wrapper","time":{"start":1743497890366,"stop":1743497890392,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"default_values","time":{"start":1743497890366,"stop":1743497890366,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test successful modification of wiki page when wiki and page exist.","status":"failed","statusMessage":"AssertionError: assert ToolException(\"Unable to modify wiki page: WikiPageCreateOrUpdateParameters.__init__() got an unexpected keyword argument 'name'\") == 'Page modified successfully'","statusTrace":"self = <src.tests.ado.wiki.test_unit_ado_wiki.TestWikiApiWrapperPositive object at 0x7f3344e15f10>\nwiki_wrapper = AzureDevOpsApiWrapper(organization_url='https://dev.azure.com/test-repo', project='project', token='token_value')\ndefault_values = {'organization_url': 'https://dev.azure.com/test-repo', 'project': 'project', 'token': 'token_value'}\n\n    def test_modify_wiki_page_success_with_existing_wiki_and_page(self, wiki_wrapper, default_values):\n        \"\"\"Test successful modification of wiki page when wiki and page exist.\"\"\"\n        with patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.create_wiki\") as mock_create_wiki, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.get_all_wikis\") as mock_get_all_wikis, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.get_page\") as mock_get_page, \\\n            patch(\"azure.devops.v7_0.wiki.wiki_client.WikiClient.create_or_update_page\") as mock_create_or_update_page, \\\n            patch(\"azure.devops.v7_0.core.core_client.CoreClient.get_projects\") as mock_get_projects:\n    \n            mock_create_wiki.return_value = MagicMock()\n            mock_get_all_wikis.return_value = [MagicMock(name=\"test-wiki-id\")]\n            mock_page = MagicMock()\n            mock_page.eTag = \"test-version\"\n            mock_get_page.return_value = mock_page\n            mock_create_or_update_page.return_value = \"Page modified successfully\"\n    \n            mock_project = MagicMock()\n            mock_project.name = default_values[\"project\"]\n            mock_project.id = \"project-id\"\n            mock_get_projects.return_value = [mock_project]\n    \n            wiki_wrapper._client.get_all_wikis = mock_get_all_wikis\n            wiki_wrapper._client.get_page = mock_get_page\n            wiki_wrapper._client.create_or_update_page = mock_create_or_update_page\n            wiki_wrapper._core_client.get_projects = mock_get_projects\n    \n            result = wiki_wrapper.modify_wiki_page(\n                wiki_identified=\"test-wiki-id\",\n                page_name=\"/test-page\",\n                page_content=\"Updated content\",\n                version_identifier=\"branch_name\",\n                version_type=\"branch\"\n            )\n    \n>           assert result == \"Page modified successfully\"\nE           assert ToolException(\"Unable to modify wiki page: WikiPageCreateOrUpdateParameters.__init__() got an unexpected keyword argument 'name'\") == 'Page modified successfully'\n\nsrc/tests/ado/wiki/test_unit_ado_wiki.py:259: AssertionError","steps":[],"attachments":[{"uid":"684914bd37f122b2","name":"log","source":"684914bd37f122b2.txt","type":"text/plain","size":230}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wiki_wrapper::0","time":{"start":1743497890419,"stop":1743497890419,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_suite_cleanup::0","time":{"start":1743497891512,"stop":1743497891512,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"positive"},{"name":"tag","value":"ado_wiki"},{"name":"tag","value":"unit"},{"name":"parentSuite","value":"src.tests.ado.wiki"},{"name":"suite","value":"test_unit_ado_wiki"},{"name":"subSuite","value":"TestWikiApiWrapperPositive"},{"name":"host","value":"fv-az1959-265"},{"name":"thread","value":"2729-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"src.tests.ado.wiki.test_unit_ado_wiki"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["unit","positive","ado_wiki"]},"source":"46b9dafcac20adc8.json","parameterValues":[]}